
#!/bin/sh

# Python license
PY_VERSION=$(python3 -V)

# Dependency licenses
python3 -m pip install pip-licenses
PIP_LICENSES=$(python3 -m piplicenses --with-system --from=mixed --format=markdown --with-urls --ignore-packages thtools seaborn matplotlib PTable pip pip-licenses)

read -r -d '' MAIN_TEXT << EOM
# Overview of third party libraries included within ToeholdTools

ToeholdTools is licensed under the terms of the [GPLv3](https://github.com/lkn849/thtools/blob/master/COPYING).

However, the distributed app is made using [PyInstaller](https://github.com/pyinstaller/pyinstaller).
This means that it includes a standalone copy of $PY_VERSION and that all Python dependencies are bundled in as well.
The Python license is available [here](https://github.com/python/cpython/blob/main/LICENSE).

This is a compendium of projects which are packaged into the app,
generated by [pip-licenses](https://github.com/raimon49/pip-licenses) via our script [third_party/NOTICES.sh](https://github.com/lkn849/thtools/blob/master/third_party/NOTICES.sh).

To access this table from inside the app, click the button labelled \`Legal\` in the top right hand corner.

## PyPI libraries included
$PIP_LICENSES
EOM

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
rm $SCRIPT_DIR/*.md
printf "$MAIN_TEXT" > "$SCRIPT_DIR/NOTICES.md"